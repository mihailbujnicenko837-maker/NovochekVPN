<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Novochek VPN</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --bg: #0b0b0f; --card: #1c1c24; --primary: #007aff; --text: #fff; --gray: #8e8e93; }
        body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; padding: 20px; padding-bottom: 100px; -webkit-tap-highlight-color: transparent; }
        
        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .user h1 { font-size: 24px; margin: 0; font-weight: 800; }
        .user p { color: var(--gray); margin: 5px 0 0; font-size: 13px; }
        .badge { background: rgba(0,122,255,0.15); color: var(--primary); padding: 5px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; }

        /* STATUS CARD */
        .card { background: var(--card); border-radius: 24px; padding: 25px; text-align: center; margin-bottom: 15px; position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
        .icon-box { width: 80px; height: 80px; background: rgba(255,255,255,0.05); border-radius: 50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 35px; color: var(--gray); transition: 0.3s; }
        .active .icon-box { background: rgba(50,215,75,0.15); color: #32d74b; box-shadow: 0 0 20px rgba(50,215,75,0.2); }
        .status-text { font-size: 20px; font-weight: 700; margin-bottom: 5px; }
        .sub-text { color: var(--gray); font-size: 14px; }

        /* KEY SECTION */
        .key-box { background: rgba(0,0,0,0.3); border-radius: 16px; padding: 15px; margin-top: 15px; display: none; }
        .key-box.show { display: block; }
        .key-val { font-family: monospace; color: var(--gray); font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 10px; }
        .copy-btn { background: var(--primary); color: #fff; border: none; width: 100%; padding: 12px; border-radius: 12px; font-weight: 600; font-size: 14px; cursor: pointer; }
        
        /* GUIDE GRID */
        .guide-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .g-item { background: var(--card); padding: 15px; border-radius: 18px; text-align: center; text-decoration: none; color: #fff; transition: 0.2s; }
        .g-item:active { opacity: 0.7; transform: scale(0.98); }
        .g-icon { font-size: 24px; margin-bottom: 8px; display: block; }
        .g-name { font-size: 13px; font-weight: 600; }

        /* ACTION BUTTON */
        .main-btn { position: fixed; bottom: 30px; left: 20px; right: 20px; background: var(--primary); color: #fff; border: none; padding: 18px; border-radius: 20px; font-size: 17px; font-weight: 700; box-shadow: 0 10px 30px rgba(0,122,255,0.3); z-index: 100; cursor: pointer; }
        
        /* TABS */
        .tabs { display: flex; background: var(--card); padding: 5px; border-radius: 16px; margin-bottom: 20px; }
        .tab { flex: 1; text-align: center; padding: 10px; font-size: 13px; font-weight: 600; color: var(--gray); border-radius: 12px; }
        .tab.active { background: rgba(255,255,255,0.1); color: #fff; }

        .section { display: none; }
        .section.active { display: block; }
    </style>
</head>
<body>

    <div class="header">
        <div class="user">
            <h1 id="name">...</h1>
            <p>ID: <span id="uid">...</span></p>
        </div>
        <div class="badge" id="levelBadge">GUEST</div>
    </div>

    <div class="tabs">
        <div class="tab active" onclick="setTab('home')">–ì–ª–∞–≤–Ω–∞—è</div>
        <div class="tab" onclick="setTab('guide')">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</div>
    </div>

    <div id="home" class="section active">
        <div class="card" id="statusCard">
            <div class="icon-box" id="statusIcon"><i class="fas fa-shield-alt"></i></div>
            <div class="status-text" id="statusTitle">–ù–µ –∑–∞—â–∏—â–µ–Ω–æ</div>
            <div class="sub-text" id="statusDesc">–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞</div>
            
            <div class="key-box" id="keySection">
                <div class="key-val" id="keyText">vless://...</div>
                <button class="copy-btn" onclick="copyKey()"><i class="fas fa-copy"></i> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</button>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div class="card" style="margin:0; padding: 15px;">
                <div style="font-size:12px; color:var(--gray);">–¢—Ä–∞—Ñ–∏–∫</div>
                <div style="font-size:16px; font-weight:700;">‚àû GB</div>
            </div>
            <div class="card" style="margin:0; padding: 15px;">
                <div style="font-size:12px; color:var(--gray);">–õ–æ–∫–∞—Ü–∏—è</div>
                <div style="font-size:16px; font-weight:700;">NL üá≥üá±</div>
            </div>
        </div>
    </div>

    <div id="guide" class="section">
        <h3 style="margin-bottom:15px;">1. –°–∫–∞—á–∞–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
        <div class="guide-grid">
            <a href="https://apps.apple.com/ru/app/v2raytun/id6476628951" class="g-item">
                <i class="fab fa-apple g-icon"></i>
                <span class="g-name">iPhone</span>
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.v2raytun.android" class="g-item">
                <i class="fab fa-android g-icon" style="color:#32d74b;"></i>
                <span class="g-name">Android</span>
            </a>
        </div>
        
        <h3 style="margin-bottom:15px;">2. –ü–æ–¥–∫–ª—é—á–∏</h3>
        <div class="card" style="text-align: left; padding: 15px;">
            <div style="display:flex; gap:15px; margin-bottom:10px;">
                <div style="background:var(--primary); width:25px; height:25px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:bold;">1</div>
                <div style="font-size:14px; line-height:1.4;">–°–∫–æ–ø–∏—Ä—É–π –∫–ª—é—á –Ω–∞ –≤–∫–ª–∞–¥–∫–µ <b>–ì–ª–∞–≤–Ω–∞—è</b>.</div>
            </div>
            <div style="display:flex; gap:15px;">
                <div style="background:var(--primary); width:25px; height:25px; border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:bold;">2</div>
                <div style="font-size:14px; line-height:1.4;">–û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏ <b>Import from Clipboard</b>.</div>
            </div>
        </div>
    </div>

    <button class="main-btn" id="actionBtn" onclick="buy()">–ö–£–ü–ò–¢–¨ –î–û–°–¢–£–ü</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –î–∞–Ω–Ω—ã–µ
        const user = tg.initDataUnsafe.user;
        const params = new URLSearchParams(window.location.search);
        const status = params.get('status');
        const date = params.get('date');
        const key = params.get('key'); // –ü–û–õ–£–ß–ê–ï–ú –ö–õ–Æ–ß –ò–ó URL

        // UI
        if (user) {
            document.getElementById('name').innerText = user.first_name;
            document.getElementById('uid').innerText = user.id;
        }

        if (status === 'active') {
            document.getElementById('statusCard').classList.add('active');
            document.getElementById('statusTitle').innerText = '–ê–∫—Ç–∏–≤–Ω–∞';
            document.getElementById('statusDesc').innerText = `–ò—Å—Ç–µ–∫–∞–µ—Ç: ${date}`;
            document.getElementById('statusIcon').innerHTML = '<i class="fas fa-check"></i>';
            document.getElementById('levelBadge').innerText = 'PRO';
            document.getElementById('levelBadge').style.color = '#32d74b';
            document.getElementById('levelBadge').style.background = 'rgba(50,215,75,0.15)';
            
            document.getElementById('actionBtn').innerText = '–ü–†–û–î–õ–ò–¢–¨ –ü–û–î–ü–ò–°–ö–£';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–ª—é—á
            if (key) {
                document.getElementById('keySection').classList.add('show');
                document.getElementById('keyText').innerText = key;
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏
        function setTab(name) {
            document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            document.getElementById(name).classList.add('active');
            event.target.classList.add('active');
        }

        function copyKey() {
            if(key) {
                navigator.clipboard.writeText(key);
                tg.showPopup({title: '–ì–æ—Ç–æ–≤–æ', message: '–ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω! –í—Å—Ç–∞–≤—å –µ–≥–æ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.'});
            }
        }

        function buy() {
            const data = { action: 'buy' };
            tg.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>
