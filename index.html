<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>City VPN Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #007AFF;
            --bg-dark: #0a0a0c;
            --card-glass: rgba(255, 255, 255, 0.06);
            --text-main: #ffffff;
            --text-sec: rgba(255, 255, 255, 0.5);
            --success: #32d74b;
            --danger: #ff453a;
            --accent: #0A84FF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 50% -20%, #1c1c3d 0%, #000000 100%);
            color: var(--text-main);
            margin: 0; padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- ‚ùÑÔ∏è –°–ù–ï–ì --- */
        #snow-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }

        /* --- üéÑ –ì–ò–†–õ–Ø–ù–î–ê (–ò–°–ü–†–ê–í–õ–ï–ù–ê) --- */
        .lightrope {
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            position: absolute;
            z-index: 99; /* –ü–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
            top: -15px;
            left: 0;
            width: 100%;
            margin: 0; padding: 0;
            pointer-events: none;
            display: flex;
            justify-content: center;
        }
        .lightrope li {
            position: relative;
            list-style: none;
            margin: 0 10px; /* –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É –ª–∞–º–ø–∞–º–∏ */
            padding: 0;
            display: block;
            width: 12px; height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,1);
            animation-fill-mode: both;
            animation-iteration-count: infinite;
        }
        .lightrope li:before {
            content: ""; position: absolute; background: #222;
            width: 24px; height: 2px; border-radius: 50%;
            top: -2px; left: -11px; z-index: -1;
        }
        .lightrope li:nth-child(2n+1) { background: #0f0; box-shadow: 0 2px 12px #0f0; animation: flash 2s infinite alternate; }
        .lightrope li:nth-child(4n+2) { background: #f00; box-shadow: 0 2px 12px #f00; animation: flash 2.5s infinite alternate; }
        .lightrope li:nth-child(3n+4) { background: #00f; box-shadow: 0 2px 12px #00f; animation: flash 1.5s infinite alternate; }
        @keyframes flash { 0% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.4; transform: scale(0.9); } }

        /* --- –ö–û–ù–¢–ï–ô–ù–ï–† --- */
        .container {
            position: relative; z-index: 10;
            padding: 20px; max-width: 480px; margin: 0 auto;
            display: flex; flex-direction: column; gap: 20px;
        }

        /* --- –®–ê–ü–ö–ê --- */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            margin-top: 30px; margin-bottom: 10px;
        }
        .user-info h1 { font-size: 22px; margin: 0; font-weight: 700; }
        .user-info p { margin: 4px 0 0 0; font-size: 13px; color: var(--text-sec); }
        .server-badge {
            background: rgba(255,255,255,0.1); padding: 6px 12px;
            border-radius: 20px; font-size: 12px; font-weight: 600;
            display: flex; align-items: center; gap: 6px;
            backdrop-filter: blur(10px);
        }

        /* --- –ì–õ–ê–í–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê (–î–ò–ù–ê–ú–ò–ß–ï–°–ö–ê–Ø) --- */
        .status-card {
            background: var(--card-glass);
            border-radius: 24px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.08);
            backdrop-filter: blur(20px);
            text-align: center;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ù–ï –ê–ö–¢–ò–í–ï–ù */
        .status-card.inactive { border-color: rgba(255, 69, 58, 0.3); }
        .status-card.inactive .icon-box { color: var(--danger); background: rgba(255, 69, 58, 0.1); }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ê–ö–¢–ò–í–ï–ù */
        .status-card.active { border-color: rgba(50, 215, 75, 0.3); background: linear-gradient(180deg, rgba(50,215,75,0.05) 0%, rgba(255,255,255,0.02) 100%); }
        .status-card.active .icon-box { color: var(--success); background: rgba(50, 215, 75, 0.1); }

        .icon-box {
            width: 70px; height: 70px; border-radius: 50%;
            margin: 0 auto 15px; display: flex; align-items: center; justify-content: center;
            font-size: 32px; transition: all 0.3s;
        }
        
        .status-title { font-size: 20px; font-weight: 700; margin-bottom: 5px; }
        .status-desc { font-size: 14px; color: var(--text-sec); margin-bottom: 20px; }

        /* –ò–Ω—Ñ–æ-—Å—Ç—Ä–æ–∫–∞ (–æ—Å—Ç–∞–ª–æ—Å—å –¥–Ω–µ–π) */
        .info-row {
            display: flex; justify-content: space-between;
            background: rgba(0,0,0,0.2); border-radius: 12px; padding: 12px 15px;
            margin-top: 15px; display: none; /* –°–∫—Ä—ã—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
        }
        .status-card.active .info-row { display: flex; }
        
        .info-item { text-align: left; }
        .info-label { font-size: 11px; color: var(--text-sec); display: block; }
        .info-value { font-size: 14px; font-weight: 600; color: #fff; }

        /* --- SPEED TEST WIDGET (–í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø) --- */
        .speed-widget {
            display: none; /* –°–∫—Ä—ã—Ç–æ, –ø–æ–∫–∞ –Ω–µ –∫—É–ø–∏–ª */
            margin-top: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            padding: 15px;
            align-items: center;
            gap: 15px;
        }
        .status-card.active .speed-widget { display: flex; }
        
        .speed-graph {
            flex: 1; height: 4px; background: #333; border-radius: 2px; overflow: hidden; position: relative;
        }
        .speed-bar {
            width: 50%; height: 100%; background: var(--success);
            position: absolute; left: 0; top: 0;
            animation: speedAnim 2s infinite ease-in-out;
            box-shadow: 0 0 10px var(--success);
        }
        @keyframes speedAnim { 0% { width: 30%; } 50% { width: 90%; } 100% { width: 40%; } }
        
        .speed-text { font-size: 12px; font-family: monospace; color: var(--success); min-width: 70px; text-align: right; }

        /* --- –ö–ù–û–ü–ö–ê –î–ï–ô–°–¢–í–ò–Ø --- */
        .action-btn {
            background: var(--primary);
            color: white; border: none; width: 100%; padding: 18px;
            border-radius: 16px; font-size: 16px; font-weight: 600;
            cursor: pointer; transition: transform 0.1s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.25);
        }
        .action-btn:active { transform: scale(0.98); }
        .action-btn.extend { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); box-shadow: none; }

        /* --- –°–ï–¢–ö–ê –ü–õ–ê–¢–§–û–†–ú --- */
        .section-title { font-size: 13px; color: var(--text-sec); text-transform: uppercase; letter-spacing: 1px; margin: 10px 0 5px; }
        
        .platforms-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 8px;
        }
        .platform-card {
            background: var(--card-glass);
            border-radius: 12px; padding: 12px 5px;
            display: flex; flex-direction: column; align-items: center;
            border: 1px solid rgba(255,255,255,0.05); cursor: pointer;
        }
        .platform-card i { font-size: 20px; margin-bottom: 6px; color: #fff; }
        .platform-card span { font-size: 10px; color: var(--text-sec); }
        .platform-card:active { background: rgba(255,255,255,0.15); }

        /* --- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ --- */
        .menu-list {
            background: var(--card-glass); border-radius: 16px;
            overflow: hidden;
        }
        .menu-item {
            padding: 16px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer;
        }
        .menu-item:last-child { border-bottom: none; }
        .menu-item:active { background: rgba(255,255,255,0.05); }
        .menu-icon { width: 30px; display: flex; justify-content: center; color: var(--text-sec); }
        .menu-text { flex: 1; font-size: 14px; margin-left: 10px; }
        .menu-arrow { color: var(--text-sec); font-size: 12px; }

        /* --- –ú–û–î–ê–õ–ö–ê –û–ü–õ–ê–¢–´ --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85); z-index: 200;
            display: none; justify-content: center; align-items: center;
            padding: 20px; backdrop-filter: blur(10px);
        }
        .modal {
            background: #151517; width: 100%; max-width: 320px;
            border-radius: 24px; padding: 25px; text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .loader {
            border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid var(--primary);
            border-radius: 50%; width: 40px; height: 40px;
            animation: spin 1s linear infinite; margin: 0 auto 15px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .modal h3 { margin: 0 0 10px; font-size: 18px; }
        .modal p { font-size: 13px; color: var(--text-sec); margin: 0 0 20px; line-height: 1.5; }
        
        .btn-check {
            background: var(--success); color: #000; border: none;
            width: 100%; padding: 14px; border-radius: 12px;
            font-weight: 700; cursor: pointer; margin-bottom: 10px;
        }
        .btn-cancel { background: transparent; color: var(--text-sec); border: none; font-size: 13px; cursor: pointer; }
    </style>
</head>
<body>

    <!-- ‚ùÑÔ∏è –§–û–ù -->
    <canvas id="snow-canvas"></canvas>
    
    <!-- üéÑ –ì–ò–†–õ–Ø–ù–î–ê -->
    <ul class="lightrope">
        <li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li>
    </ul>

    <div class="container">
        
        <!-- HEADER -->
        <div class="header">
            <div class="user-info">
                <h1 id="userName">–ì–æ—Å—Ç—å</h1>
                <p id="userCity">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏...</p>
            </div>
            <div class="server-badge" id="pingBadge">
                <div style="width:6px; height:6px; background:#ff453a; border-radius:50%;" id="pingDot"></div>
                <span id="pingText">Offline</span>
            </div>
        </div>

        <!-- MAIN CARD -->
        <div class="status-card inactive" id="mainCard">
            <div class="icon-box" id="statusIcon">
                <i class="fas fa-lock"></i>
            </div>
            <div class="status-title" id="statusTitle">–ó–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞</div>
            <div class="status-desc" id="statusDesc">–í–∞—à —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω</div>
            
            <!-- –ë–ª–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ (–°–∫—Ä—ã—Ç –µ—Å–ª–∏ –Ω–µ—Ç –æ–ø–ª–∞—Ç—ã) -->
            <div class="info-row">
                <div class="info-item">
                    <span class="info-label">–¢–∞—Ä–∏—Ñ</span>
                    <span class="info-value">Premium üéÑ</span>
                </div>
                <div class="info-item" style="text-align: right;">
                    <span class="info-label">–ò—Å—Ç–µ–∫–∞–µ—Ç</span>
                    <span class="info-value" id="expDate">--.--.--</span>
                </div>
            </div>

            <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ (–°–∫—Ä—ã—Ç–æ –µ—Å–ª–∏ –Ω–µ—Ç –æ–ø–ª–∞—Ç—ã) -->
            <div class="speed-widget">
                <i class="fas fa-bolt" style="color: var(--success); font-size: 14px;"></i>
                <div class="speed-graph"><div class="speed-bar"></div></div>
                <div class="speed-text" id="speedNum">0 Mbps</div>
            </div>
        </div>

        <!-- ACTION BUTTON -->
        <button class="action-btn" id="mainBtn" onclick="handleMainButton()">
            <i class="fas fa-shield-alt"></i> –ö–£–ü–ò–¢–¨ –î–û–°–¢–£–ü
        </button>

        <!-- DOWNLOADS -->
        <div class="section-title">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
        <div class="platforms-grid">
            <div class="platform-card" onclick="tg.openLink('https://apps.apple.com/ru/app/v2raytun/id6476628951')">
                <i class="fab fa-apple"></i> <span>iOS</span>
            </div>
            <div class="platform-card" onclick="tg.openLink('https://play.google.com/store/apps/details?id=com.v2raytun.android')">
                <i class="fab fa-android"></i> <span>Android</span>
            </div>
            <div class="platform-card" onclick="tg.openLink('https://github.com/hiddify/hiddify-next/releases/latest')">
                <i class="fab fa-windows"></i> <span>PC</span>
            </div>
            <div class="platform-card" onclick="alert('–î–ª—è TV —Å–∫–∞—á–∞–π—Ç–µ V2RayTun –∏–∑ Google Play –Ω–∞ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–µ')">
                <i class="fas fa-tv"></i> <span>TV</span>
            </div>
        </div>

        <!-- MENU -->
        <div class="menu-list">
            <div class="menu-item" onclick="openHelp()">
                <div class="menu-icon"><i class="fas fa-book-open"></i></div>
                <div class="menu-text">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>
                <i class="fas fa-chevron-right menu-arrow"></i>
            </div>
            <div class="menu-item" onclick="tg.openTelegramLink('https://t.me/Ajdaha61')">
                <div class="menu-icon"><i class="fas fa-headset"></i></div>
                <div class="menu-text">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</div>
                <i class="fas fa-chevron-right menu-arrow"></i>
            </div>
            <div class="menu-item" onclick="resetDemo()">
                <div class="menu-icon"><i class="fas fa-redo"></i></div>
                <div class="menu-text" style="color: var(--text-sec)">–°–±—Ä–æ—Å–∏—Ç—å –¥–µ–º–æ (–¥–ª—è —Ç–µ—Å—Ç–∞)</div>
            </div>
        </div>
    </div>

    <!-- MOCK PAYMENT MODAL -->
    <div class="modal-overlay" id="paymentModal">
        <div class="modal">
            <div class="loader"></div>
            <h3>–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</h3>
            <p>–ú—ã –æ—Ç–∫—Ä—ã–ª–∏ –¥–∏–∞–ª–æ–≥ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –ü—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –æ–ø–ª–∞—Ç—É –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.</p>
            <button class="btn-check" onclick="confirmPaymentMock()">–Ø –æ–ø–ª–∞—Ç–∏–ª!</button>
            <button class="btn-cancel" onclick="closePaymentModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –ö–û–ù–§–ò–ì
        const ADMIN_LINK = 'https://t.me/Ajdaha61?text=–•–æ—á—É –∫—É–ø–∏—Ç—å VPN Premium';
        
        // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
            document.getElementById('userName').innerText = tg.initDataUnsafe.user.first_name;
        }

        // 2. –ì–µ–æ –∏ IP
        fetch('https://get.geojs.io/v1/ip/geo.json')
            .then(res => res.json())
            .then(data => {
                document.getElementById('userCity').innerText = `${data.city}, ${data.country}`;
            })
            .catch(() => { document.getElementById('userCity').innerText = '–ó–µ–º–ª—è'; });

        // 3. –ü–†–û–í–ï–†–ö–ê –ü–û–î–ü–ò–°–ö–ò (–ò–º–∏—Ç–∞—Ü–∏—è –ë—ç–∫–µ–Ω–¥–∞ —á–µ—Ä–µ–∑ LocalStorage)
        function checkSubscription() {
            const expiry = localStorage.getItem('vpn_expiry');
            const now = new Date();
            
            if (expiry && new Date(expiry) > now) {
                // –ü–û–î–ü–ò–°–ö–ê –ê–ö–¢–ò–í–ù–ê
                setAppActive(new Date(expiry));
            } else {
                // –ü–û–î–ü–ò–°–ö–ê –ù–ï –ê–ö–¢–ò–í–ù–ê
                setAppInactive();
            }
        }

        function setAppActive(dateObj) {
            const card = document.getElementById('mainCard');
            const btn = document.getElementById('mainBtn');
            const pingDot = document.getElementById('pingDot');
            const pingText = document.getElementById('pingText');
            
            // UI
            card.classList.remove('inactive');
            card.classList.add('active');
            
            document.getElementById('statusIcon').innerHTML = '<i class="fas fa-rocket"></i>';
            document.getElementById('statusTitle').innerText = "VPN –ê–∫—Ç–∏–≤–µ–Ω";
            document.getElementById('statusDesc').innerText = "–¢—Ä–∞—Ñ–∏–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω. –°–∫–æ—Ä–æ—Å—Ç—å –º–∞–∫—Å.";
            
            // –î–∞—Ç–∞
            const day = dateObj.getDate().toString().padStart(2, '0');
            const month = (dateObj.getMonth() + 1).toString().padStart(2, '0');
            document.getElementById('expDate').innerText = `${day}.${month}.2026`; // –ì–æ–¥ —Ñ–µ–π–∫ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞

            // –ö–Ω–æ–ø–∫–∞
            btn.innerHTML = '<i class="fas fa-sync"></i> –ü–†–û–î–õ–ò–¢–¨ (29 –î–ù.)';
            btn.classList.add('extend');
            btn.onclick = () => tg.openTelegramLink(ADMIN_LINK); // –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –≤–µ–¥–µ—Ç –∫ –∞–¥–º–∏–Ω—É

            // –ü–∏–Ω–≥ (–§–µ–π–∫)
            pingDot.style.background = '#32d74b';
            pingText.innerText = '45 ms';
            
            // –ó–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
            startSpeedSimulation();
        }

        function setAppInactive() {
            const card = document.getElementById('mainCard');
            const btn = document.getElementById('mainBtn');
            const pingDot = document.getElementById('pingDot');
            const pingText = document.getElementById('pingText');

            card.classList.remove('active');
            card.classList.add('inactive');
            
            document.getElementById('statusIcon').innerHTML = '<i class="fas fa-lock"></i>';
            document.getElementById('statusTitle').innerText = "–í—ã –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã";
            document.getElementById('statusDesc').innerText = "–ö—É–ø–∏—Ç–µ –¥–æ—Å—Ç—É–ø –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö";
            
            btn.innerHTML = '<i class="fas fa-shield-alt"></i> –ö–£–ü–ò–¢–¨ –î–û–°–¢–£–ü';
            btn.classList.remove('extend');
            btn.onclick = handleMainButton;

            pingDot.style.background = '#ff453a';
            pingText.innerText = 'Offline';
        }

        // 4. –õ–û–ì–ò–ö–ê –û–ü–õ–ê–¢–´ (–°—Ü–µ–Ω–∞—Ä–∏–π)
        function handleMainButton() {
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –æ–∂–∏–¥–∞–Ω–∏—è
            document.getElementById('paymentModal').style.display = 'flex';
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å –∞–¥–º–∏–Ω–æ–º –¥–ª—è –æ–ø–ª–∞—Ç—ã
            tg.openTelegramLink(ADMIN_LINK);
        }

        function confirmPaymentMock() {
            // –ò–º–∏—Ç–∏—Ä—É–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä–∏–ª –æ–ø–ª–∞—Ç—É
            const btn = document.querySelector('.btn-check');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ü—Ä–æ–≤–µ—Ä–∫–∞...';
            
            setTimeout(() => {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º "–ø–æ–∫—É–ø–∫—É" –Ω–∞ 30 –¥–Ω–µ–π
                const date = new Date();
                date.setDate(date.getDate() + 30);
                localStorage.setItem('vpn_expiry', date.toISOString());
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∫—É –∏ –æ–±–Ω–æ–≤–ª—è–µ–º UI
                document.getElementById('paymentModal').style.display = 'none';
                tg.HapticFeedback.notificationOccurred('success');
                checkSubscription();
                
                btn.innerHTML = '–Ø –æ–ø–ª–∞—Ç–∏–ª!'; // –í–µ—Ä–Ω—É—Ç—å —Ç–µ–∫—Å—Ç
            }, 1500);
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        // –î–ª—è —Ç–µ—Å—Ç–æ–≤: —Å–±—Ä–æ—Å
        function resetDemo() {
            if(confirm('–°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏?')) {
                localStorage.removeItem('vpn_expiry');
                window.location.reload();
            }
        }

        function openHelp() {
            tg.showAlert("–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:\n1. –û–ø–ª–∞—Ç–∏—Ç–µ –¥–æ—Å—Ç—É–ø.\n2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (vless://).\n3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ V2RayTun.\n4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!");
        }

        // 5. –°–ò–ú–£–õ–Ø–¢–û–† –°–ö–û–†–û–°–¢–ò
        function startSpeedSimulation() {
            const el = document.getElementById('speedNum');
            setInterval(() => {
                // –°–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç 150 –¥–æ 300 Mbps
                const speed = Math.floor(Math.random() * (300 - 150 + 1) + 150);
                el.innerText = speed + " Mbps";
            }, 1000);
        }

        // 6. –°–ù–ï–ì (–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
        (function() {
            const c = document.getElementById('snow-canvas'), ctx = c.getContext('2d');
            let w = c.width = window.innerWidth, h = c.height = window.innerHeight;
            const flakes = Array.from({length: 40}, () => ({
                x: Math.random()*w, y: Math.random()*h, r: Math.random()*2+1, s: Math.random()*2+1
            }));
            function loop() {
                ctx.clearRect(0,0,w,h); ctx.fillStyle = "rgba(255,255,255,0.4)"; ctx.beginPath();
                flakes.forEach(f => {
                    f.y += f.s; f.x += Math.sin(f.y/50)*0.5;
                    if(f.y>h) f.y = -5;
                    ctx.moveTo(f.x,f.y); ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
                });
                ctx.fill(); requestAnimationFrame(loop);
            }
            loop();
        })();

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        checkSubscription();

    </script>
</body>
</html>
